<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Healthmandu - काठमाडौं स्वास्थ्य डैशबोर्ड</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=DM+Sans:wght@400;500;600&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="home.css" />
</head>
<body>
  <nav class="navbar animate-slide-down">
    <div class="nav-container">
      <div class="logo">
        <h1>Healthmandu</h1>
        <span class="logo-subtitle">काठमाडौं स्वास्थ्य सेवा</span>
      </div>
      <ul class="nav-links">
        <li><a href="#" class="active">Dashboard</a></li>
        <li><a href="#">Emergency</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">सहायता</a></li>
      </ul>
    </div>
  </nav>

  <div class="app-container">
    <!-- Enhanced Sidebar -->
    <aside class="sidebar animate-slide-left">
      <div class="profile-card">
        <div class="profile-header">
          <h3>नमस्ते! Welcome back</h3>
          <div class="weather-widget animate-fade-in-up" style="animation-delay: 0.3s;">
            <div class="weather-info">
              <span class="temp">22°C</span>
              <span class="condition">Partly Cloudy</span>
            </div>
            <div class="location-pin">📍 Kathmandu Valley</div>
          </div>
        </div>
        <form class="profile-form">
          <div class="input-group animate-fade-in-up" style="animation-delay: 0.4s;">
            <label for="name">नाम / Name</label>
            <input type="text" id="name" placeholder="Enter your name" />
          </div>
          <div class="input-group animate-fade-in-up" style="animation-delay: 0.5s;">
            <label for="location">स्थान / Location</label>
            <select id="location">
              <option value="" disabled selected>Select Ward/Area</option>
              <option value="thamel">Thamel (थमेल)</option>
              <option value="durbar-square">Durbar Square (दरबार स्क्वायर)</option>
              <option value="maharajgunj">Maharajgunj (महाराजगञ्ज)</option>
              <option value="new-baneshwor">New Baneshwor (नयाँ बानेश्वर)</option>
              <option value="lazimpat">Lazimpat (लाजिम्पाट)</option>
              <option value="baluwatar">Baluwatar (बालुवाटार)</option>
              <option value="patan">Patan (पाटन)</option>
              <option value="bhaktapur">Bhaktapur (भक्तपुर)</option>
            </select>
          </div>
          <div class="profile-info animate-fade-in-up" style="animation-delay: 0.6s;">
            <p>
              🏥 Your location helps us find nearby hospitals, clinics, and wellness centers.
              <br><br>
              📱 Emergency: <strong>100</strong> (Police) | <strong>101</strong> (Fire) | <strong>102</strong> (Ambulance)
            </p>
          </div>
        </form>
      </div>
    </aside>

    <!-- Enhanced Main Content -->
    <main class="main-content animate-slide-right">
      <!-- Greeting + AQI with Himalayan context -->
      <section class="greeting-section scroll-animate">
        <div class="greeting-card animate-fade-in-up" style="animation-delay: 0.2s;">
          <h2>स्वागतम्! Welcome to Healthmandu</h2>
          <p>
            Your comprehensive health dashboard for Kathmandu Valley. Find real-time air quality data, 
            locate nearby hospitals, clinics, and wellness centers, and stay updated with health events 
            in the heart of Nepal.
          </p>
          <div class="quick-stats">
            <div class="stat animate-counter" data-target="47">
              <span class="stat-number">0</span>
              <span class="stat-label">Health Centers</span>
            </div>
            <div class="stat animate-counter" data-target="23">
              <span class="stat-number">0</span>
              <span class="stat-label">Wellness Spots</span>
            </div>
          </div>
        </div>
        <div class="aqi-card animate-fade-in-up" style="animation-delay: 0.4s;">
          <h3>🌫️ Air Quality Index</h3>
          <div class="aqi-value">
            <span class="aqi-number animate-counter" data-target="156">0</span>
            <span class="aqi-status unhealthy">Unhealthy</span>
          </div>
          <p>
            Air quality in Kathmandu is currently unhealthy. Wear N95 masks outdoors 
            and consider staying indoors during peak traffic hours (7-9 AM, 5-7 PM).
          </p>
          <div class="aqi-tips">
            <small>💡 Tip: Visit Shivapuri or Nagarjun for cleaner air</small>
          </div>
        </div>
      </section>

      <!-- Enhanced Tabs -->
      <section class="tabs-container scroll-animate">
        <div class="tabs">
          <button class="tab active animate-slide-up" data-tab="health-centers" style="animation-delay: 0.1s;">
            🏥 Health Centers
          </button>
          <button class="tab animate-slide-up" data-tab="wellness-spots" style="animation-delay: 0.2s;">
            🧘‍♀️ Wellness & Ayurveda
          </button>
          <button class="tab animate-slide-up" data-tab="pharmacies" style="animation-delay: 0.3s;">
            💊 Pharmacies
          </button>
        </div>

        <div class="tabpanel active" id="health-centers">
          <h3>Major Hospitals & Clinics in Kathmandu</h3>
          <div class="grid">
            <div class="card featured scroll-animate-card" style="animation-delay: 0.1s;">
              <h4>🏥 TU Teaching Hospital</h4>
              <p>📍 Maharajgunj, Kathmandu</p>
              <p>🚨 24/7 Emergency & Trauma Center</p>
              <p>📞 +977-1-4412303</p>
              <div class="card-badge">Government</div>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.2s;">
              <h4>🏥 Bir Hospital</h4>
              <p>📍 Mahaboudha, Kathmandu</p>
              <p>🩺 General Medicine & Surgery</p>
              <p>📞 +977-1-4221119</p>
              <div class="card-badge">Government</div>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.3s;">
              <h4>🏥 Patan Hospital</h4>
              <p>📍 Lagankhel, Lalitpur</p>
              <p>👶 Pediatrics & Maternity</p>
              <p>📞 +977-1-5522266</p>
              <div class="card-badge">NGO</div>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.4s;">
              <h4>🏥 Grande International Hospital</h4>
              <p>📍 Dhapasi, Kathmandu</p>
              <p>💎 Premium Healthcare Services</p>
              <p>📞 +977-1-5159266</p>
              <div class="card-badge private">Private</div>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.5s;">
              <h4>🏥 Nepal Medical College</h4>
              <p>📍 Jorpati, Kathmandu</p>
              <p>🎓 Teaching Hospital</p>
              <p>📞 +977-1-4911008</p>
              <div class="card-badge">Private</div>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.6s;">
              <h4>🏥 Dhulikhel Hospital</h4>
              <p>📍 Dhulikhel, Kavre</p>
              <p>🌄 Community Healthcare</p>
              <p>📞 +977-11-490497</p>
              <div class="card-badge">NGO</div>
            </div>
          </div>
        </div>

        <div class="tabpanel" id="wellness-spots">
          <h3>Wellness Centers & Traditional Medicine</h3>
          <div class="grid">
            <div class="card scroll-animate-card" style="animation-delay: 0.1s;">
              <h4>🧘‍♀️ Nepal Yoga Home</h4>
              <p>📍 Thamel, Kathmandu</p>
              <p>🕉️ Traditional Yoga & Meditation</p>
              <p>📞 +977-1-4700632</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.2s;">
              <h4>🌿 Ayurveda Health Home</h4>
              <p>📍 New Baneshwor, Kathmandu</p>
              <p>🌱 Panchakarma & Herbal Treatment</p>
              <p>📞 +977-1-4782333</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.3s;">
              <h4>💆‍♀️ Seeing Hands Clinic</h4>
              <p>📍 Lazimpat, Kathmandu</p>
              <p>👐 Therapeutic Massage by Visually Impaired</p>
              <p>📞 +977-1-4429178</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.4s;">
              <h4>🧘‍♂️ Himalayan Yoga Academy</h4>
              <p>📍 Bouddha, Kathmandu</p>
              <p>🏔️ Mountain Meditation Retreats</p>
              <p>📞 +977-1-4480430</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.5s;">
              <h4>🌸 Spa Therapy Center</h4>
              <p>📍 Durbar Marg, Kathmandu</p>
              <p>💅 Wellness & Beauty Treatments</p>
              <p>📞 +977-1-4220909</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.6s;">
              <h4>🏃‍♂️ Fitness First Nepal</h4>
              <p>📍 Anamnagar, Kathmandu</p>
              <p>💪 Modern Gym & Fitness Classes</p>
              <p>📞 +977-1-4221155</p>
            </div>
          </div>
        </div>

        <div class="tabpanel" id="pharmacies">
          <h3>24/7 Pharmacies & Medical Stores</h3>
          <div class="grid">
            <div class="card scroll-animate-card" style="animation-delay: 0.1s;">
              <h4>💊 Bhat Bhateni Pharmacy</h4>
              <p>📍 Multiple Locations</p>
              <p>🕐 24/7 Service Available</p>
              <p>📞 +977-1-4221457</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.2s;">
              <h4>💊 Omni Pharmacy</h4>
              <p>📍 New Road, Kathmandu</p>
              <p>🩹 Medical Equipment & Supplies</p>
              <p>📞 +977-1-4220055</p>
            </div>
            <div class="card scroll-animate-card" style="animation-delay: 0.3s;">
              <h4>💊 Medicare Pharmacy</h4>
              <p>📍 Maharajgunj, Kathmandu</p>
              <p>💉 Prescription & OTC Medicines</p>
              <p>📞 +977-1-4412789</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Enhanced Events with Nepali context -->
      <section class="events-section scroll-animate">
        <h3>🗓️ Upcoming Health Events</h3>
        <div class="event-card scroll-animate-event" style="animation-delay: 0.1s;">
          <div class="event-date">
            <span class="day">15</span>
            <span class="month">Bhadra</span>
          </div>
          <div class="event-details">
            <span class="event-title">Free Health Camp at Patan Durbar Square</span>
            <span class="event-desc">Blood pressure & diabetes screening</span>
          </div>
        </div>
        <div class="event-card scroll-animate-event" style="animation-delay: 0.2s;">
          <div class="event-date">
            <span class="day">22</span>
            <span class="month">Bhadra</span>
          </div>
          <div class="event-details">
            <span class="event-title">Yoga Day Celebration at Garden of Dreams</span>
            <span class="event-desc">Free yoga sessions & meditation workshop</span>
          </div>
        </div>
        <div class="event-card scroll-animate-event" style="animation-delay: 0.3s;">
          <div class="event-date">
            <span class="day">5</span>
            <span class="month">Ashwin</span>
          </div>
          <div class="event-details">
            <span class="event-title">Blood Donation Drive - Bir Hospital</span>
            <span class="event-desc">Help save lives in our community</span>
          </div>
        </div>
        <div class="event-card scroll-animate-event" style="animation-delay: 0.4s;">
          <div class="event-date">
            <span class="day">12</span>
            <span class="month">Ashwin</span>
          </div>
          <div class="event-details">
            <span class="event-title">Mental Health Awareness Seminar</span>
            <span class="event-desc">Breaking stigma around mental health in Nepal</span>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Enhanced tabs functionality with animations
    const tabs = document.querySelectorAll('.tab');
    const panels = document.querySelectorAll('.tabpanel');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        // Remove active class from all tabs & panels
        tabs.forEach(t => t.classList.remove('active'));
        panels.forEach(p => {
          p.classList.remove('active');
          p.style.opacity = '0';
        });

        // Add active class to clicked tab & related panel with animation
        tab.classList.add('active');
        const targetPanel = document.getElementById(tab.dataset.tab);
        
        setTimeout(() => {
          targetPanel.classList.add('active');
          targetPanel.style.opacity = '1';
          
          // Animate cards in the new panel
          const cards = targetPanel.querySelectorAll('.card');
          cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
              card.style.transition = 'all 0.5s ease';
              card.style.opacity = '1';
              card.style.transform = 'translateY(0)';
            }, index * 100);
          });
        }, 150);
      });
    });

    // Dynamic greeting based on time
    const now = new Date();
    const hour = now.getHours();
    let greeting = 'नमस्ते!';
    
    if (hour < 12) greeting = 'शुभ प्रभात! Good Morning';
    else if (hour < 17) greeting = 'नमस्कार! Good Afternoon';
    else greeting = 'शुभ साँझ! Good Evening';
    
    document.querySelector('.profile-header h3').textContent = greeting + ' Welcome back';

    // Scroll animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in');
          
          // Animate cards with stagger effect
          if (entry.target.classList.contains('tabs-container')) {
            const cards = entry.target.querySelectorAll('.card');
            cards.forEach((card, index) => {
              setTimeout(() => {
                card.classList.add('animate-in');
              }, index * 100);
            });
          }
          
          // Animate events with stagger effect
          if (entry.target.classList.contains('events-section')) {
            const events = entry.target.querySelectorAll('.event-card');
            events.forEach((event, index) => {
              setTimeout(() => {
                event.classList.add('animate-in');
              }, index * 150);
            });
          }
        }
      });
    }, observerOptions);

    // Observe scroll animate elements
    document.querySelectorAll('.scroll-animate').forEach(el => {
      observer.observe(el);
    });

    // Counter animation
    function animateCounter(element, target, duration = 2000) {
      let start = 0;
      const increment = target / (duration / 16);
      
      const timer = setInterval(() => {
        start += increment;
        if (start >= target) {
          element.textContent = target;
          clearInterval(timer);
        } else {
          element.textContent = Math.floor(start);
        }
      }, 16);
    }

    // Animate counters when they come into view
    const counterObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const target = parseInt(entry.target.dataset.target);
          const numberElement = entry.target.querySelector('.stat-number') || entry.target;
          animateCounter(numberElement, target);
          counterObserver.unobserve(entry.target);
        }
      });
    });

    document.querySelectorAll('.animate-counter').forEach(el => {
      counterObserver.observe(el);
    });

    // Parallax effect for background
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const parallax = document.body;
      const speed = scrolled * 0.5;
      parallax.style.backgroundPosition = `center ${speed}px`;
    });

    // Add hover effects to interactive elements
    document.querySelectorAll('.card').forEach(card => {
      card.addEventListener('mouseenter', () => {
        card.style.transform = 'translateY(-8px) scale(1.02)';
      });
      
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'translateY(0) scale(1)';
      });
    });

    // Add click ripple effect
    document.querySelectorAll('.tab, .card').forEach(element => {
      element.addEventListener('click', function(e) {
        const ripple = document.createElement('span');
        const rect = this.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        const x = e.clientX - rect.left - size / 2;
        const y = e.clientY - rect.top - size / 2;
        
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = x + 'px';
        ripple.style.top = y + 'px';
        ripple.classList.add('ripple');
        
        this.appendChild(ripple);
        
        setTimeout(() => {
          ripple.remove();
        }, 600);
      });
    });

    // Loading animation
    window.addEventListener('load', () => {
      document.body.classList.add('loaded');
      
      // Fetch real data after page loads
      setTimeout(() => {
        fetchWeatherData();
        fetchAQIData();
      }, 1000); // Delay to let animations start first
    });

    setInterval(() => {
      fetchWeatherData();
      fetchAQIData();
    }, 600000); // 10 minutes

    // API Configuration
    const WEATHER_API_KEY = '8a24cd69c593916ec95f65431a479820';
    const KATHMANDU_LAT = 27.7172;
    const KATHMANDU_LON = 85.3240;

    // Fetch Weather Data
    async function fetchWeatherData() {
      try {
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Kathmandu,np&appid=${WEATHER_API_KEY}&units=metric`);
        const data = await response.json();
        
        if (data.main && data.weather) {
          // Update temperature
          const tempElement = document.querySelector('.temp');
          const conditionElement = document.querySelector('.condition');
          
          if (tempElement && conditionElement) {
            tempElement.textContent = `${Math.round(data.main.temp)}°C`;
            conditionElement.textContent = data.weather[0].description
              .split(' ')
              .map(word => word.charAt(0).toUpperCase() + word.slice(1))
              .join(' ');
          }
          
          console.log('Weather data updated:', data);
        }
      } catch (error) {
        console.error('Error fetching weather data:', error);
        // Keep default values on error
      }
    }

    // Fetch AQI Data using World Air Quality Index API
    async function fetchAQIData() {
      try {
        const response = await fetch('https://api.waqi.info/feed/kathmandu/?token=3a4de3c409e5e4a8dfebed640fbec023e748e572');
        const data = await response.json();
        
        if (data.status === 'ok' && data.data) {
          const aqiValue = data.data.aqi;
          
          // Update AQI display
          const aqiNumberElement = document.querySelector('.aqi-number');
          const aqiStatusElement = document.querySelector('.aqi-status');
          
          if (aqiNumberElement) {
            // Update the counter target and animate
            aqiNumberElement.dataset.target = aqiValue;
            animateCounter(aqiNumberElement, aqiValue);
          }
          
          if (aqiStatusElement) {
            // Update status based on AQI level using standard AQI ranges
            let status = 'Good';
            let statusClass = 'good';
            
            if (aqiValue > 200) {
              status = 'Very Unhealthy';
              statusClass = 'unhealthy';
            } else if (aqiValue > 150) {
              status = 'Unhealthy';
              statusClass = 'unhealthy';
            } else if (aqiValue > 100) {
              status = 'Unhealthy for Sensitive';
              statusClass = 'sensitive';
            } else if (aqiValue > 50) {
              status = 'Moderate';
              statusClass = 'moderate';
            }
            
            aqiStatusElement.textContent = status;
            aqiStatusElement.className = `aqi-status ${statusClass}`;
          }
          
          console.log('Kathmandu AQI:', data);
          console.log('AQI value:', data.data.aqi);
        }
      } catch (error) {
        console.error('Error fetching AQI data:', error);
        // Keep default values on error
      }
    }
  </script>
</body>
</html>
